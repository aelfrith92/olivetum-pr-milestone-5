{% load static %}

<!DOCTYPE html>
{% load bootstrap5 %}
{% if 'use_i18n'|bootstrap_setting %}
    {% load i18n %}
    {% get_current_language as LANGUAGE_CODE %}
{% endif %}
<html lang="{{ LANGUAGE_CODE|default:'en_us' }}">

  <head>
    {% block meta %}
      <meta http-equiv="X-UA-Compatible" content="ie=edge">
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    {% endblock %}

    {% block extra_meta %}
    {% endblock %}

    <!-- Bootstrap CSS -->
    {% bootstrap_css %}

    {% block corecss %}
      <!-- Custom CSS -->
      <link rel="stylesheet" href="{% static 'css/base.css' %}">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,100..700,0..1,-50..200" />
    {% endblock %}

    {% block extra_css %}
    {% endblock %}

    {% block corejs %}
      <!-- jQuery -->
      <script src="https://code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
      
      <!-- Bootstrap JavaScript if it is in head -->
      {% if 'javascript_in_head'|bootstrap_setting %}
          {% bootstrap_javascript %}
      {% endif %}

      <!-- Custom scripts -->
      <script type="text/javascript" src="{% static 'js/scripts.js' %}"></script>
      <!-- Font Awesome -->
      <script src="https://kit.fontawesome.com/393e73732d.js" crossorigin="anonymous"></script>
    {% endblock %}

    <title>
      Olivetum{% block extra_title %}{% endblock %}
    </title>

  </head>
  <body>
    <!-- Navigation-->
    <nav class=" container-fluid navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <div class="container px-4 px-lg-5">
        <a class="navbar-brand d-flex" href="{% url 'home' %}">
          <div id="brand_icon">
            <svg height="32" viewBox="0 0 512 512" width="32" xmlns="http://www.w3.org/2000/svg"><ellipse cx="400" cy="416" fill="#2e9163" rx="56" ry="40"/>
              <ellipse cx="312" cy="384" fill="#3dc285" rx="16" ry="72"/>
              <ellipse cx="400" cy="472" fill="#35a872" rx="72" ry="16"/>
              <ellipse cx="344" cy="392" fill="#35a872" rx="72" ry="16" transform="matrix(.707 -.707 .707 .707 -176.431 358.059)"/>
              <ellipse cx="352" cy="448" fill="#3dc285" rx="56" ry="40"/>
              <path d="m208 104v32h32a16 16 0 0 1 16 16v16a16 16 0 0 1 -16 16h-32v32h48a32 32 0 0 0 32-32v-48a32 32 0 0 0 -32-32z" fill="#e3d3c2"/>
              <path d="m80 440h176v48h-176z" fill="#ffb632"/>
              <path d="m224 215.288v-111.288h-112v111.288c-42.626 24.668-72 76.612-72 136.712 0 33.107 8.915 63.736 24.037 88.691a31.914 31.914 0 0 0 27.312 15.309h153.3a31.913 31.913 0 0 0 27.311-15.309c15.126-24.955 24.04-55.584 24.04-88.691 0-60.1-29.374-112.044-72-136.712z" fill="#fbe9d8"/>
              <path d="m296 352c0 33.11-8.91 63.74-24.04 88.69a31.887 31.887 0 0 1 -27.31 15.31h-153.3a31.887 31.887 0 0 1 -27.31-15.31c-15.13-24.95-24.04-55.58-24.04-88.69a174.2 174.2 0 0 1 15.25-72h225.5a174.2 174.2 0 0 1 15.25 72z" fill="#ffd33a"/>
              <path d="m192 136h-48l-32-112h112z" fill="#ad6643"/>
              <path d="m96 72h144v32h-144z" fill="#e3d3c2"/>
              <ellipse cx="224" cy="416" fill="#35a872" rx="16" ry="72" transform="matrix(.707 -.707 .707 .707 -228.548 280.235)"/>
              <ellipse cx="224" cy="440" fill="#3dc285" rx="72" ry="16"/>
              <ellipse cx="280" cy="440" fill="#2e9163" rx="56" ry="40" transform="matrix(.707 -.707 .707 .707 -229.117 326.863)"/>
              <path d="m455.02 453.426c-3.488-.847-7.323-1.6-11.418-2.263 12.598-8.81 20.398-21.363 20.398-35.163 0-13.339-7.015-25.695-19.751-34.793-11.922-8.517-27.637-13.207-44.249-13.207-1.739 0-3.463.066-5.177.167a96.047 96.047 0 0 0 5.457-9.666c1.877-3.9 7.586-15.768.287-23.068-8.27-8.27-22.718-.64-32.865 5.819-9.759 6.211-20.928 15.11-32.152 25.563a222.19 222.19 0 0 0 -4.426-35.46c-2.608-11.743-7.43-27.355-19.124-27.355-5.411 0-9.349 3.346-12.278 8.1a174.9 174.9 0 0 0 -16.689-45.529 153.607 153.607 0 0 0 -33.401-42.571h6.368a40.045 40.045 0 0 0 40-40v-48a40.045 40.045 0 0 0 -40-40h-8v-24a8 8 0 0 0 -8-8h-19.1l10.8-37.8a8 8 0 0 0 -7.7-10.2h-112a8 8 0 0 0 -7.692 10.2l10.8 37.8h-19.108a8 8 0 0 0 -8 8v32a8 8 0 0 0 8 8h8v98.773c-20.8 13.058-38.385 32.26-51.033 55.8-13.717 25.527-20.967 55.066-20.967 85.427 0 33.55 8.714 65.653 25.2 92.83a39.654 39.654 0 0 0 14.8 14.157v29.013a8 8 0 0 0 8 8h175.964a47.91 47.91 0 0 0 8.1.679 56.207 56.207 0 0 0 9.25-.788c11.218-1.869 22.415-7 32.361-14.686 11.96 9.351 28.71 14.795 46.325 14.795a85.464 85.464 0 0 0 16.387-1.58 304.174 304.174 0 0 0 31.613 1.58c19.8 0 38.494-1.731 52.645-4.875 11.743-2.609 27.355-7.431 27.355-19.125 0-11.212-14.256-15.971-24.98-18.574zm-7.02-37.426c0 13.467-13.474 25.62-32.062 30.127-.626-12.619-7.552-24.25-19.689-32.92a71.625 71.625 0 0 0 -28.083-11.671c4.712-5.012 9.116-10.016 13.163-14.961a67.1 67.1 0 0 1 18.671-2.575c26.019 0 48 14.654 48 32zm-60.983-67.057c-1.895 4.7-6.52 13.132-16.6 25.691a285.667 285.667 0 0 1 -20.767 23.019c-.873.874-1.71 1.7-2.524 2.5a82.389 82.389 0 0 0 -15.881 2.413 37.455 37.455 0 0 0 -3.521-5.061c1.964-2.171 8.973-9.509 10.621-11.157 22.282-22.29 40.245-33.955 48.672-37.405zm-67.025 33.357q-2.459 2.611-4.827 5.249a41.043 41.043 0 0 0 -11.165-3.549c0-31.6 4.477-52.581 8-60.934 3.458 8.201 7.835 28.581 7.992 59.234zm-87.992-238.3h8a8.009 8.009 0 0 1 8 8v16a8.009 8.009 0 0 1 -8 8h-8zm24-32a24.028 24.028 0 0 1 24 24v48a24.028 24.028 0 0 1 -24 24h-24v-16h8a24.027 24.027 0 0 0 24-24v-16a24.027 24.027 0 0 0 -24-24h-8v-16zm-133.395-80h90.795l-9.14 32h-72.51zm-18.605 48h128v16h-128zm86.535 32-4.57 16h-35.93l-4.57-16zm-74.528 110.214a8 8 0 0 0 3.993-6.924v-103.29h8.825l7.483 26.2a8 8 0 0 0 7.692 5.8h48a8 8 0 0 0 7.692-5.8l7.483-26.2h8.825v103.29a8 8 0 0 0 3.993 6.924c19.587 11.335 35.879 28.753 47.607 49.786h-199.2c11.728-21.033 28.02-38.451 47.607-49.786zm-68.007 129.786a167.181 167.181 0 0 1 12.652-64h214.7a167.181 167.181 0 0 1 12.648 64 172.268 172.268 0 0 1 -3.069 32.442c-13.5 2.656-26.87 9.959-37.969 20.745q-2.943-3.1-5.994-6.153c-13.995-14-28.439-26-40.67-33.782-10.149-6.458-24.594-14.089-32.865-5.819-8.06 8.061-1 21.891 5.019 31.592a209.229 209.229 0 0 0 20.136 26.537 173.812 173.812 0 0 0 -26.147 4.515c-9.633 2.586-22.441 7.258-22.441 17.923a12.188 12.188 0 0 0 2.991 8h-55.641a24.011 24.011 0 0 1 -20.47-11.458c-14.968-24.684-22.88-53.918-22.88-84.542zm176.109 94.685c-.074.442-.124.876-.187 1.315-31.507-.008-52.443-4.466-60.816-7.983 6.678-2.813 21.848-6.585 46.96-7.714 6.119-.266 12.3-.349 18.336-.268a66.282 66.282 0 0 0 -4.293 14.65zm-11.109-30.502c-19.112-20.041-29.033-35.646-32.106-43.277 8.389 3.4 26.4 15.074 48.758 37.441q2.9 2.9 5.7 5.85c-7.262-.248-14.812-.259-22.352-.014zm-125 47.658c1.111.094 2.226.159 3.35.159h132.65a39.779 39.779 0 0 0 6.382 16h-142.382zm158.059 10.1c-12.266-12.265-7.084-38.17 11.314-56.568 11.627-11.629 26.257-17.973 38.544-17.973 7.152 0 13.512 2.151 18.024 6.664 12.266 12.265 7.084 38.171-11.314 56.568s-44.301 23.575-56.568 11.309zm71.473-3.83c9.737-10.982 16.206-23.876 18.359-36.8a52.9 52.9 0 0 0 .375-15.5 68.036 68.036 0 0 1 15.734-1.811c26.019 0 48 14.654 48 32s-21.981 32-48 32c-13.123 0-25.46-3.614-34.468-9.889zm82.468 9.889h-.166a46.76 46.76 0 0 0 12.478-15.761c25.043.98 41.489 4.746 48.624 7.761-8.351 3.522-29.331 8-60.936 8z"/>
            </svg>
          </div>
          <div id="brand_name">Olivetum</div>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navigationMenu" aria-controls="navigationMenu" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-between" id="navigationMenu">
          <ul class="navbar-nav me-4 mb-2 mb-lg-0 ms-lg-4">
            <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="{% url 'home' %}">Home</a>
            </li>
            {% if request.user.is_authenticated %}
              {% if request.user.is_superuser %}
                <li class="nav-item">
                  <a href="" class="nav-link">Product Management</a>
                </li>
              {% endif %}
              <li class="nav-item">
                <a href="" class="nav-link">My Profile</a>
              </li>
              <li class="nav-item">
                <a href="{% url 'account_logout' %}" class="nav-link">Logout</a>
              </li>
            {% else %}
              <li class="nav-item">
                <a href="{% url 'account_signup' %}" class="nav-link">Register</a>
              </li>
              <li class="nav-item">
                <a href="{% url 'account_login' %}" class="nav-link">Login</a>
              </li>
            {% endif %}
          </ul>
          <div id="searchContainer" class="d-flex justify-content-center align-items-center">
            <form class="d-flex" method='GET' action="{% url 'products' %}">
                
              <input class="form-control me-2 mt-lg-1" type="search" placeholder="Search" aria-label="Search" name="q">
              
              <button id="searchBtn" class="svgFill btn btn-outline-light mt-lg-1" type="submit">
                <svg height="24" width="24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 56.966 56.966" style="enable-background:new 0 0 56.966 56.966;" xml:space="preserve">
                  <path fill="#f8f3e5" d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17s-17-7.626-17-17S14.61,6,23.984,6z"/>
                </svg>
              </button>

            </form>
          </div>
          <div id="shoppingBag" class="svgFill nav-item float-end mt-3 mt-lg-0">
            <a id="shoppingBagSvgHoverColor" href="{% url 'view_bag' %}" class="d-flex align-items-center btn btn-outline-light nav-item">
              <svg height="32" viewBox="-96 -27 859 859.3115" width="32" xmlns="http://www.w3.org/2000/svg">
                  <path fill="#f8f3e5" d="m621.503906 805.6875h-585.683594c-1.175781 0-2.355468-.054688-3.519531-.140625-22.253906-2.050781-38.617187-21.675781-36.601562-43.785156l48.835937-537.070313c1.894532-20.882812 19.128906-36.632812 40.101563-36.632812h488.050781c20.9375.023437 38.167969 15.773437 40.070312 36.632812l48.828126 537.070313c.105468 1.144531.15625 2.386719.15625 3.621093.011718 22.199219-18.027344 40.289063-40.238282 40.304688zm-536.867187-590.777344c-6.984375 0-12.726563 5.246094-13.355469 12.207032l-48.832031 537.085937c-.679688 7.367187 4.785156 13.910156 12.15625 14.578125l1.214843.054688h585.667969c7.398438-.015626 13.402344-6.03125 13.402344-13.441407l-48.878906-538.261719c-.628907-6.960937-6.371094-12.207031-13.351563-12.222656zm136.609375 67.171875c-.019532-7.40625-6.066406-13.449219-13.457032-13.464843l.0625-26.851563c22.125.050781 40.183594 18.109375 40.246094 40.238281zm0 0"/>
                  <path fill="#f8f3e5" d="m449.5 322.324219c-22.210938 0-40.28125-18.066407-40.28125-40.28125 0-22.210938 18.066406-40.277344 40.28125-40.277344 22.210938 0 40.277344 18.066406 40.277344 40.277344 0 22.214843-18.066406 40.28125-40.277344 40.28125zm0-53.707031c-7.40625 0-13.429688 6.019531-13.429688 13.425781 0 7.414062 6.023438 13.429687 13.429688 13.429687 7.410156 0 13.425781-6.015625 13.425781-13.429687 0-7.40625-6.015625-13.425781-13.425781-13.425781zm0 0"/>
                  <path fill="#f8f3e5" d="m207.816406 322.324219c-22.207031 0-40.277344-18.066407-40.277344-40.28125 0-22.210938 18.066407-40.277344 40.277344-40.277344v26.851563c-7.398437 0-13.425781 6.015624-13.425781 13.425781 0 7.40625 6.027344 13.429687 13.425781 13.429687 7.402344 0 13.429688-6.023437 13.429688-13.429687h26.851562c0 22.214843-18.066406 40.28125-40.28125 40.28125zm0 0"/>
                  <path fill="#f8f3e5" d="m221.246094 282.082031c-.019532-7.40625-6.066406-13.449219-13.457032-13.464843l.0625-26.851563c22.125.050781 40.183594 18.109375 40.246094 40.238281zm0 0"/>
                  <path fill="#f8f3e5" d="m462.925781 255.191406h-26.855469v-120.839844c0-59.226562-48.183593-107.414062-107.410156-107.414062-59.226562 0-107.414062 48.1875-107.414062 107.414062v120.839844h-26.855469v-120.839844c0-74.039062 60.230469-134.2695308 134.269531-134.2695308 74.03125 0 134.265625 60.2304688 134.265625 134.2695308zm0 0"/>
              </svg>
              <div class="m-1 rounded-pill">
                {% if grand_total %}
                  ${{ grand_total|floatformat:2 }}
                {% else %}
                  €0.00
                {% endif %}
              </div>
            </a>
          </div> 
        </div>
      </div>
    </nav>
    <div id="delivery-banner" class="container-fluid text-wrap">
      <div class="bg-light text-dark text-center border-bottom">
        <h4 class="logo-font my-1">Free delivery on orders over ${{ free_delivery_threshold }}!</h4>                
      </div>
    </div>

    <!-- Django messages -->
    {% if messages %}
    <div class="toast-container rounded position-fixed end-0 p-3">
        {% for message in messages %}
            {% with message.level as level %}
                {% if level == 40 %}
                    {% include 'includes/toasts/toast_error.html' %}
                {% elif level == 30 %}
                    {% include 'includes/toasts/toast_warning.html' %}
                {% elif level == 25 %}
                    {% include 'includes/toasts/toast_success.html' %}
                {% else %}
                    {% include 'includes/toasts/toast_info.html' %}
                {% endif %}
            {% endwith %}
        {% endfor %}
    </div>
    {% endif %}

    {% block content %}
    {% endblock %}

    {% block postloadjs %}
    {{ block.super }}
      <script type="text/javascript">
        const toastElList = $('.toast');
        for(let toastEl of toastElList){
          const toast = new bootstrap.Toast(toastEl);
          toast.show();
        }
        
      </script>
    {% endblock %}
    
  <!-- Bootstrap JavaScript if it is in body -->
  {% if not 'javascript_in_head'|bootstrap_setting %}
    {% bootstrap_javascript %}
  {% endif %}
  </body>
</html>
